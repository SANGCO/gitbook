

## Chapter 1 인프라 아키텍처를 살펴보자



### 1.1 시작하며



#### Column 궁극의 아키텍처와 최적의 아키텍처



### 1.2 집약형과 분할형 아키텍처



### 1.3 수직 분할형 아키텍처



#### Column 웹은 클라이언트-서버형을 대체할 수 있을까?



### 1.4 수평 분할형 아키텍처



#### Column 가상화 진행 상황



### 1.5 지리 분할형 아키텍처



#### Column 기술은 대물림되고 있다







## Chapter 2 서버를 열어 보자



### 2.1 물리 서버



#### 서버 외관과 설치 장소



#### 서버 내부 구성



### 2.2 CPU



### 2.3 메모리

- `그림 2.10` 캐시를 여러 단으로 배치해서 대기 시간을 줄인다 참고
  - 캐시를 여러 단계로 배치
  - 각 코어별로 자신의 L1, L2 캐시를 가지고 있다.
  - 초고속으로 액세스하고 싶은 데이터는 L1 캐시에
  - 준고속으로 액세스하고 싶은 데이터는 L2 캐시에
  - 이 아키텍처에서는 L1, L2 캐시에 있는 데이터가 L3에도 존재하기 때문에 다른 코어는 자신 이외의 캐시를 확인하지 않고 L3 캐시만 확인하면 되는 구조다.
- `그림 2.11` 미리 읽어서 메모리 처리 지연을 경감
  - 메모리에는 미리 데이터를 CPU에 전달해서 처리 지연을 줄이는 '메모리 인터리빙(memory interleaving)'이라는 기능이 있다.
  - `그림 2.10`의 왼쪽 아래에 메모리 컨트롤러와 채널(channel)이 있다.
    - 이것을 자세히 표현한 것이 `그림 2.11`이다.
    - 채널은 메모리와 CPU 간 데이터 경로를 말한다.
  - 최대 세 개의 채널을 사용해서 데이터1을 요구하면 데이터 2와 3도 함께 보내 버린다.
    - 이것은 대부분의 데이터가 연속해서  액세스된다는 규칙을 기반으로 만들어진 것이다.
    - 먼저 읽어서 처리 지연을 줄여주는 것이다.



### 2.4 I/O 장치



#### 하드 디스크 드라이브(HDD)



#### 네트워크 인터페이스



#### I/O 제어



### 2.5 버스



#### 대역



#### 버스 대역



### 2.6 정리











Chapter 3 3계층형 시스템을 살펴보자 51
3.1 | 3계층형 시스템의 구성도 52
3.2 | 주요 개념 설명 53
Column 막대 인간의 모험 57
Column 커널은 결코 견고하지 않다 62
3.3 | 웹 데이터 흐름 63
Column 데이터와 함께 전달되는 당신을 향한 마음 71
Column RDBMS와 KVS의 소리 없는 전쟁 75
Column 높은 하늘을 날다 ― 조감도 78

Chapter 4 인프라를 지탱하는 기본 이론 79
4.1 | 웹 데이터 흐름 80
Column 병렬과 병행 86
4.2 | 동기/비동기 86
Column C10K 문제 93
4.3 | 큐 94
4.4 | 배타적 제어 101
Column 멀티 프로세서 시스템에서는 배타적 제어가 어렵다 106
4.5 | 상태 저장/상태 비저장 107
4.6 | 가변 길이/고정 길이 113
4.7 | 데이터 구조(배열과 연결 리스트) 119
4.8 | 탐색 알고리즘(해시/트리 등) 124

Chapter 5 인프라를 지탱하는 응용 이론 133
5.1 | 캐시 134
5.2 | 끼어들기 139
5.3 | 폴링 144
5.4 | 핑퐁 149
5.5 | 저널링 156
Column 변화는 항상 순식간에 일어난다 162
5.6 | 복제 163
5.7 | 마스터-슬레이브 168
5.8 | 압축 172
5.9 | 오류 체크/오류 수정 178

Chapter 6 시스템을 연결하는 네트워크 구조 185
6.1 | 네트워크 186
6.2 | 【기초】 계층 구조란? 187
6.3 | 【기초】 프로토콜이란? 191
Column 표준화 단체에 대해서 194
6.4 | TCP/IP를 이용하고 있는 현재의 네트워크 196
6.5 | 【레이어 7】 애플리케이션 계층의 프로토콜 HTTP 199
Column 한 번 잡으면 놓아주지 않는다 204
6.6 | 【레이어 4】 전송 계층 프로토콜 TCP 205
Column 인터넷의 주인은 누구? 207
6.7 | 【레이어 3】 네트워크 계층의 프로토콜 IP 216
Column IP 주소 고갈과 IPv6 221
Column IP 헤더에서 체크섬이 사라진 날 224
6.8 | 【레이어 2】 데이터 링크 계층의 프로토콜 이더넷 224
6.9 | TCP/IP를 이용한 통신 이후 231
Column NIC의 끼어들기와 패킷 처리 235

Chapter 7 무정지를 위한 인프라 구조 237
7.1 | 안정성 및 이중화 238
Column 장애 보호 240
7.2 | 서버 내 이중화 241
7.3 | 저장소 이중화 248
7.4 | 웹 서버 이중화 256
Column 장애 괴담 첫 번째 이야기, ‘벌써 시간이 다 됐어?’ 256
Column DSR(Direct Server Return) 264
7.5 | AP 서버 이중화 265
7.6 | DB 서버 이중화 270
Column 장애 괴담 두 번째 이야기, ‘진단 때문에 죽었다’ 279
7.7 | 네트워크 장비 이중화 279
Column 장애 괴담 세 번째 이야기, ‘브로드캐스트 스톰’ 289
7.8 | 사이트 이중화 290
7.9 | 감시 293
7.10 | 백업 301
7.11 | 정리 305

Chapter 8 성능 향상을 위한 인프라 구조 307
8.1 | 응답과 처리량 308
Column 가장 중요한 응답 시간은? 311
8.2 | 병목 현상이란? 315
Column CAP 정리를 익혀서 초능력자가 되자 317
Column 병목 현상의 숙명의 적, 데이터베이스 321
8.3 | 3계층형 시스템 그림을 통해 본 병목 현상 321
Column 여유가 있는 노련한 시스템 324
Column C는 자바보다 빠르다? 333
Column 아이들을 공원에서 놀게 하자 341
Column ORDER(N) ? 일인분 나왔습니다 344
Column 대역이 가장 중요한 것일까? 347
8.4 | 정리 354